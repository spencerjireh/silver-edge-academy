# Build context should be repo root
FROM oven/bun:1-alpine

WORKDIR /app

# Copy root workspace files and all workspaces (Bun requires all declared workspaces to exist)
COPY package.json bun.lock* ./
COPY packages ./packages
COPY apps ./apps
COPY backend/package.json ./backend/package.json

# Install all dependencies from root
RUN bun install

WORKDIR /app/apps/admin

# Expose Vite dev server port
EXPOSE 5173

# Start Vite dev server with host flag for Docker
CMD ["bun", "run", "dev", "--host", "0.0.0.0"]
